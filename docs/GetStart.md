# EmailSender

极简的邮件发送助手

## 1. EmailSender Cli

### 1.1 单元数据

当使用该程序时, **每一次**编译模板使用的**数据**称为单元数据.
一般来说**一次编译的模板**只发给**一个目标用户**.

### 1.2 多元数据

由于程序可以在一个**任务**中编译**多个模板**, 发给多个用户. 此时该**多元数据**为**单元数据**的**数组**.

### 1.3. 任务内的模板写法

> 如{{$id}}@mail.xxx.com

### 1.4. 字段

| 字段       | 类型            | 范围                 | 作用                                                         | 是否可使用模板写法 |
| ---------- | --------------- | -------------------- | ------------------------------------------------------------ | ------------------ |
| mode       | string          | "single"\|"multiple" | 指定如何解析data, 即**单元**或**多元**                       | 否                 |
| template   | string          | 无                   | 指定提供的模板                                               | 否                 |
| data       | string          | 无                   | 提供数据的文件支持xlsx/json等                                | 否                 |
| primaryKey | string          | 无                   | 规定单元数据的一个主键, 主要用于生成文件时便于识别如规定为name. 那么当单元数据下name对于值为Tom时生成文件为Tom.html | 否                 |
| interval   | array           | 两个元素             | 规定发一封后的休息时间, 如[25, 30]表示随机休息25-30s         | 否                 |
| subject    | string          | 无                   | 邮件主题                                                     | 是                 |
| to         | array\<string\> | 无                   | 发送至的地址如 "{{$name}}@mail.com"                          | 是                 |
| attachment | array\<string\> | 无                   | 发送的附件                                                   | 是                 |



### 1.5. 文件格式

**任务**保存为json
**数据**可选excel/json/yml

### 1.6. 使用方法

#### 1.6.1 发送邮件预测试

```shell
php ./../src/EmailSenderCli.php  -c 邮件配置文件 -f 任务文件 -o 测试输出目录
```
打开测试目录就能看到生成的测试文件啦

#### 1.6.1 发送邮件

```shell
php ./../src/EmailSenderCli.php  -c 邮件配置文件 -f 任务文件
```

## 2. EmailSender Class

## 3.TODO

因为不常使用, 未添加BBC等功能